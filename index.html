<!DOCTYPE html>
<!-- inline generator enabled: last update 2025-09-24 -->
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Генератор HTML-инструкций</title>
  <meta name="description" content="Удобная генерация HTML-страниц     </div>
  </div>

  <!-- Шаблон стилей, которые будут встраиваться в сгенерированный HTML -->шаговыми инструкциями. Полностью автономный файл: всё в index.html." />

  <style>
    :root {
      --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --bg-pattern: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0);
      --panel: rgba(255, 255, 255, 0.95);
      --panel-hover: rgba(255, 255, 255, 0.98);
      --text: #1a202c;
      --muted: #718096;
      --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --primary-hover: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      --border: rgba(226, 232, 240, 0.8);
      --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      --code-bg: #2d3748;
      --code-fg: #e2e8f0;
    }
    [data-theme="dark"] {
      --bg: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
      --bg-pattern: radial-gradient(circle at 1px 1px, rgba(148, 163, 184, 0.1) 1px, transparent 0);
      --panel: rgba(30, 41, 59, 0.95);
      --panel-hover: rgba(30, 41, 59, 0.98);
      --text: #f1f5f9;
      --muted: #94a3b8;
      --primary: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
      --primary-hover: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
      --border: rgba(51, 65, 85, 0.8);
      --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
      --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
      --code-bg: #0f172a;
      --code-fg: #e2e8f0;
    }

    html, body { height: 100%; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
      background: var(--bg), var(--bg-pattern);
      background-size: 100% 100%, 20px 20px;
      color: var(--text);
      min-height: 100vh;
      animation: backgroundShift 20s ease-in-out infinite;
    }
    @keyframes backgroundShift {
      0%, 100% { background-position: 0% 50%, 0 0; }
      50% { background-position: 100% 50%, 10px 10px; }
    }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 24px; }
    header { display:flex; gap:16px; align-items:center; justify-content:space-between; margin-bottom:16px; }
    header h1 { font-size: clamp(20px, 3vw, 28px); margin: 0; }
    header .actions { display:flex; gap:8px; align-items:center; }

    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }

    .card { 
      background: var(--panel); 
      border: 1px solid var(--border); 
      border-radius: 16px; 
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
      position: relative;
    }
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
    }
    .card:hover { 
      transform: translateY(-2px); 
      box-shadow: var(--shadow-lg);
      background: var(--panel-hover);
    }
    .card h2 { 
      margin: 0; 
      padding: 20px 20px 0; 
      font-size: 18px; 
      font-weight: 600;
      background: linear-gradient(135deg, var(--text), var(--muted));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .card .body { padding: 20px; }

    label { display:block; font-size: 13px; color: var(--muted); margin-bottom: 6px; }
    input[type="text"], textarea, select {
      width: 100%; padding: 12px 16px; background: rgba(255,255,255,0.8); color: var(--text);
      border: 2px solid var(--border); border-radius: 12px; outline: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(5px);
    }
    input[type="text"]:focus, textarea:focus, select:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
      background: rgba(255,255,255,0.95);
    }
    [data-theme="dark"] input[type="text"], 
    [data-theme="dark"] textarea, 
    [data-theme="dark"] select {
      background: rgba(30, 41, 59, 0.8);
    }
    [data-theme="dark"] input[type="text"]:focus, 
    [data-theme="dark"] textarea:focus, 
    [data-theme="dark"] select:focus {
      background: rgba(30, 41, 59, 0.95);
    }
    textarea { resize: vertical; min-height: 68px; }

    .row { display:flex; gap:12px; align-items:center; }
    .row > * { flex: 1 1 auto; }
    .row .shrink { flex: 0 0 auto; }

    .btn {
      display:inline-flex; align-items:center; gap:8px; justify-content:center;
      padding: 12px 18px; border-radius: 12px; border: 1px solid var(--border);
      background: var(--panel); color: var(--text); cursor:pointer; user-select:none;
      font-weight: 500; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative; overflow: hidden;
    }
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    .btn:hover::before { left: 100%; }
    .btn:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
    .btn:active { transform: translateY(0); }
    .btn.primary { 
      background: var(--primary); 
      color: white; 
      border-color: transparent;
      box-shadow: 0 4px 14px 0 rgba(102, 126, 234, 0.4);
    }
    .btn.primary:hover { 
      background: var(--primary-hover);
      box-shadow: 0 6px 20px 0 rgba(102, 126, 234, 0.6);
    }
    .btn.ghost { background: transparent; }
    .btn.ghost:hover { 
      background: rgba(102, 126, 234, 0.1);
      border-color: rgba(102, 126, 234, 0.3);
    }
    .btn.icon { width: 40px; height: 40px; padding: 0; border-radius: 10px; }

    .steps { display:flex; flex-direction:column; gap:16px; }
    .step { 
      padding: 16px; 
      border: 2px dashed rgba(102, 126, 234, 0.3); 
      border-radius: 12px; 
      background: rgba(255,255,255,0.5);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      animation: stepFadeIn 0.5s ease-out;
      backdrop-filter: blur(5px);
    }
    @keyframes stepFadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .step:hover {
      border-color: rgba(102, 126, 234, 0.6);
      background: rgba(255,255,255,0.8);
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }
    [data-theme="dark"] .step {
      background: rgba(30, 41, 59, 0.5);
      border-color: rgba(59, 130, 246, 0.3);
    }
    [data-theme="dark"] .step:hover {
      background: rgba(30, 41, 59, 0.8);
      border-color: rgba(59, 130, 246, 0.6);
    }
    .step-head { display:flex; gap:8px; align-items:center; margin-bottom:8px; }
    .step-index { 
      font-weight: 600; 
      color: var(--primary); 
      width:32px; 
      height:32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(102, 126, 234, 0.1);
      border-radius: 50%;
      font-size: 14px;
    }
    .step-controls { margin-left:auto; display:flex; gap:6px; }
    .step-drag-handle {
      cursor: grab;
      padding: 4px;
      border-radius: 6px;
      color: var(--muted);
      transition: all 0.2s;
      display: flex;
      align-items: center;
    }
    .step-drag-handle:hover {
      background: rgba(102, 126, 234, 0.1);
      color: var(--primary);
    }
    .step-drag-handle:active {
      cursor: grabbing;
    }
    .step.dragging {
      opacity: 0.5;
      transform: rotate(5deg);
      z-index: 1000;
      box-shadow: var(--shadow-lg);
    }
    .step.drag-over {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.1);
      transform: scale(1.02);
    }
    .steps.drag-active .step:not(.dragging) {
      transition: transform 0.2s ease;
    }

    .preview iframe { width:100%; height:520px; border:none; background:white; border-radius:8px; }

    .muted { color: var(--muted); font-size: 12px; }
    .sep { height:1px; background: var(--border); margin: 8px 0 16px; }

    /* Styles embedded into generated HTML */
    .gen-style { display:none; }
  </style>
</head>
<body>
  <div class="wrap" id="app" data-theme="light">
    <header>
      <h1>Генератор HTML-инструкций</h1>
      <div class="actions">
        <label class="row shrink" style="gap:6px; align-items:center;">
          <span class="muted">Тема</span>
          <select id="theme">
            <option value="light">Светлая</option>
            <option value="dark">Тёмная</option>
          </select>
        </label>
        <button class="btn ghost" id="resetBtn" title="Очистить форму">Сброс</button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h2>Настройки и шаги</h2>
        <div class="body">
          <div class="row">
            <div style="flex:1 1 70%">
              <label for="title">Заголовок</label>
              <input id="title" type="text" placeholder="Например: Развёртывание Docker контейнера" />
            </div>
            <div>
              <label for="listType">Тип списка</label>
              <select id="listType">
                <option value="ol">Нумерованный</option>
                <option value="ul">Маркированный</option>
              </select>
            </div>
          </div>

          <div style="margin-top:12px;">
            <label for="intro">Описание (опционально)</label>
            <textarea id="intro" placeholder="Краткое описание процедуры развёртывания..."></textarea>
          </div>

          <div style="margin-top:12px;">
            <label for="content">Текст *</label>
            <textarea id="content" rows="4" placeholder="Основной текст инструкции. Здесь можно описать контекст, требования, предварительные настройки..." required></textarea>
          </div>

          <div class="sep"></div>

          <div class="row" style="justify-content:space-between;">
            <h3 style="margin:0;font-size:16px;">Шаги</h3>
            <div class="row shrink">
              <button class="btn ghost" id="addStep">+ Шаг</button>
              <button class="btn ghost" id="addStepFromLines">Импорт из строк</button>
            </div>
          </div>

          <div class="steps" id="steps"></div>

          <div class="sep"></div>

          <div class="row">
            <button class="btn primary" id="genBtn">Сгенерировать HTML</button>
            <button class="btn ghost" id="copyBtn">Копировать</button>
            <button class="btn ghost" id="downloadBtn">Скачать .html</button>
          </div>

          <p class="muted" style="margin-top:8px;">Подсказка: перетаскивайте шаги кнопками ↑/↓, удаляйте ненужные и обновляйте превью в реальном времени.</p>
        </div>
      </section>

      <section class="card preview">
        <h2>Превью</h2>
        <div class="body">
          <iframe id="preview" title="Предпросмотр инструкции"></iframe>
          <div class="sep"></div>
          <label for="output">Готовый HTML</label>
          <textarea id="output" readonly></textarea>
        </div>
      </section>
    </div>
  </div>

  <!-- Шаблон стилей, который будет встраиваться в сгенерированный HTML -->
  <template id="embedded-style">
    <style>
      :root {
        --page-bg: #ffffff;
        --page-fg: #11131a;
        --page-muted: #6b7280;
        --page-border: #e5e7eb;
      }
      .dark {
        --page-bg: #0b1020;
        --page-fg: #e6e8f2;
        --page-muted: #9aa3b2;
        --page-border: #1e243a;
      }
      html, body { height: 100%; }
      body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', 'Helvetica Neue', Arial; background: var(--page-bg); color: var(--page-fg); }
      .container { max-width: 900px; margin: 0 auto; padding: 24px; }
      h1 { margin: 0 0 16px; font-size: clamp(22px, 4vw, 32px); }
      p.lead { color: var(--page-muted); margin-top: 0; }
      .content { margin: 16px 0; line-height: 1.6; }
      ol, ul { padding-left: 20px; }
      li { margin: 8px 0; }
      pre { background: #0a0f1e; color: #e8eaf6; padding: 12px; border-radius: 8px; overflow:auto; }
      code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }
      img { max-width: 100%; border-radius: 8px; }
      hr { border: none; border-top: 1px solid var(--page-border); margin: 16px 0; }
    </style>
  </template>

  <script>
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    // Theme
    const app = $('#app');
    const themeSel = $('#theme');
    themeSel.addEventListener('change', () => {
      app.setAttribute('data-theme', themeSel.value);
      updatePreview();
    });

    // Form elements
    const titleEl = $('#title');
    const introEl = $('#intro');
    const contentEl = $('#content');
    const stepsEl = $('#steps');
    const listTypeEl = $('#listType');
    const outputEl = $('#output');
    const iframe = $('#preview');

    const genBtn = $('#genBtn');
    const copyBtn = $('#copyBtn');
    const downloadBtn = $('#downloadBtn');
    const addStepBtn = $('#addStep');
    const addFromLinesBtn = $('#addStepFromLines');
    const resetBtn = $('#resetBtn');

    function createStep(text='') {
      const idx = stepsEl.children.length + 1;
      const wrap = document.createElement('div');
      wrap.className = 'step';
      wrap.innerHTML = `
        <div class="step-head">
          <div class="step-index" aria-hidden="true"></div>
          <div class="step-controls">
            <button class="btn icon ghost" title="Выше" aria-label="Переместить выше">↑</button>
            <button class="btn icon ghost" title="Ниже" aria-label="Переместить ниже">↓</button>
            <button class="btn icon ghost" title="Удалить" aria-label="Удалить шаг">✕</button>
          </div>
        </div>
        <textarea class="step-text" placeholder="Текст шага..."></textarea>
        <div class="muted">Поддерживаются многострочные шаги. Нумерация в тексте будет удалена автоматически.</div>
      `;
      stepsEl.appendChild(wrap);
      $('.step-text', wrap).value = text;

      const [up, down, del] = $$('.btn.icon', wrap);
      up.addEventListener('click', () => moveStep(wrap, -1));
      down.addEventListener('click', () => moveStep(wrap, +1));
      del.addEventListener('click', () => { wrap.remove(); renumber(); updatePreview(); });
      $('.step-text', wrap).addEventListener('input', debounce(updatePreview, 200));
      renumber();
    }

    function setupDragAndDrop(stepEl) {
      let draggedElement = null;
      
      stepEl.addEventListener('dragstart', (e) => {
        draggedElement = stepEl;
        stepEl.classList.add('dragging');
        stepsEl.classList.add('drag-active');
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', stepEl.outerHTML);
      });
      
      stepEl.addEventListener('dragend', () => {
        stepEl.classList.remove('dragging');
        stepsEl.classList.remove('drag-active');
        $$('.step').forEach(el => el.classList.remove('drag-over'));
        draggedElement = null;
      });
      
      stepEl.addEventListener('dragover', (e) => {
        if (draggedElement && draggedElement !== stepEl) {
          e.preventDefault();
          e.dataTransfer.dropEffect = 'move';
        }
      });
      
      stepEl.addEventListener('dragenter', (e) => {
        if (draggedElement && draggedElement !== stepEl) {
          stepEl.classList.add('drag-over');
        }
      });
      
      stepEl.addEventListener('dragleave', (e) => {
        if (!stepEl.contains(e.relatedTarget)) {
          stepEl.classList.remove('drag-over');
        }
      });
      
      stepEl.addEventListener('drop', (e) => {
        e.preventDefault();
        stepEl.classList.remove('drag-over');
        
        if (draggedElement && draggedElement !== stepEl) {
          const rect = stepEl.getBoundingClientRect();
          const midY = rect.top + rect.height / 2;
          
          if (e.clientY < midY) {
            stepsEl.insertBefore(draggedElement, stepEl);
          } else {
            stepsEl.insertBefore(draggedElement, stepEl.nextSibling);
          }
          
          renumber();
          updatePreview();
        }
      });
    }

    function moveStep(stepEl, dir) {
      const sib = dir < 0 ? stepEl.previousElementSibling : stepEl.nextElementSibling;
      if (!sib) return;
      if (dir < 0) stepsEl.insertBefore(stepEl, sib); else stepsEl.insertBefore(sib, stepEl);
      renumber();
      updatePreview();
    }

    function renumber() { $$('.step', stepsEl).forEach((el, i) => $('.step-index', el).textContent = i + 1); }

    function sanitizeLine(s) {
      return s.replace(/^\s*[0-9]+[.)-]?\s+/, '').trim();
    }

    function getSteps() {
      return $$('.step-text', stepsEl)
        .map(t => t.value)
        .map(t => t.split(/\n+/).map(sanitizeLine).filter(Boolean))
        .filter(arr => arr.length > 0)
        .map(arr => arr.join('\n'));
    }

    function buildGeneratedHTML() {
      const title = titleEl.value.trim() || 'Без названия';
      const intro = introEl.value.trim();
      const content = contentEl.value.trim();
      const steps = getSteps();
      const tag = listTypeEl.value === 'ul' ? 'ul' : 'ol';
      const theme = themeSel.value;

      const style = $('#embedded-style').innerHTML; // includes <style>...

      const listItems = steps
        .map(s => `<li>${escapeHtml(s).replaceAll('\n', '<br>')}</li>`)
        .join('\n        ');

      return `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${escapeHtml(title)}</title>
  ${style}
</head>
<body class="${theme === 'dark' ? 'dark' : ''}">
  <div class="container">
    <h1>${escapeHtml(title)}</h1>
    ${intro ? `<p class="lead">${escapeHtml(intro)}</p>` : ''}
    ${content ? `<div class="content">${escapeHtml(content).replaceAll('\n', '<br>')}</div>` : ''}
    <${tag}>
      ${listItems}
    </${tag}>
  </div>
</body>
</html>`;
    }

    function escapeHtml(str) {
      return str.replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[s]));
    }

    function updatePreview() {
      const html = buildGeneratedHTML();
      outputEl.value = html;
      iframe.srcdoc = html;
    }

    function debounce(fn, ms=200) {
      let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(null, args), ms); };
    }

    // Actions
    genBtn.addEventListener('click', updatePreview);
    addStepBtn.addEventListener('click', () => { createStep(''); updatePreview(); });
    addFromLinesBtn.addEventListener('click', () => {
      const raw = prompt('Вставьте список шагов (каждый с новой строки):');
      if (!raw) return;
      raw.split(/\n+/).map(s => s.trim()).filter(Boolean).forEach(line => createStep(line));
      updatePreview();
    });

    copyBtn.addEventListener('click', async () => {
      const html = outputEl.value || buildGeneratedHTML();
      try {
        if (navigator.clipboard?.writeText) {
          await navigator.clipboard.writeText(html);
        } else {
          outputEl.focus(); outputEl.select(); document.execCommand('copy');
        }
        toast('HTML скопирован в буфер обмена');
      } catch(e) { alert('Не удалось скопировать: ' + e.message); }
    });

    downloadBtn.addEventListener('click', () => {
      const html = outputEl.value || buildGeneratedHTML();
      const blob = new Blob([html], { type: 'text/html;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      const safeTitle = (titleEl.value.trim() || 'instruction').replace(/[^\w\-]+/g, '_');
      a.download = safeTitle + '.html';
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(() => URL.revokeObjectURL(a.href), 1000);
    });

    resetBtn.addEventListener('click', () => {
      if (!confirm('Очистить форму и начать заново?')) return;
      localStorage.removeItem('html-generator-data');
      titleEl.value = ''; introEl.value=''; contentEl.value=''; listTypeEl.value='ol'; themeSel.value='light'; app.setAttribute('data-theme','light');
      stepsEl.innerHTML='';
      createStep('Установить Docker на сервер');
      createStep('Создать Dockerfile для приложения');
      updatePreview();
      toast('Данные очищены');
    });

    // Auto-save functionality
    function saveToStorage() {
      const data = {
        title: titleEl.value,
        intro: introEl.value,
        content: contentEl.value,
        listType: listTypeEl.value,
        theme: themeSel.value,
        steps: $$('.step-text', stepsEl).map(el => el.value)
      };
      localStorage.setItem('html-generator-data', JSON.stringify(data));
    }

    function loadFromStorage() {
      try {
        const saved = localStorage.getItem('html-generator-data');
        if (!saved) return false;
        
        const data = JSON.parse(saved);
        titleEl.value = data.title || '';
        introEl.value = data.intro || '';
        contentEl.value = data.content || '';
        listTypeEl.value = data.listType || 'ol';
        themeSel.value = data.theme || 'light';
        app.setAttribute('data-theme', data.theme || 'light');
        
        stepsEl.innerHTML = '';
        if (data.steps && data.steps.length > 0) {
          data.steps.forEach(step => createStep(step));
        } else {
          createStep('Откройте инструменты');
          createStep('Добавьте шаги, при необходимости отредактируйте');
        }
        return true;
      } catch (e) {
        console.warn('Failed to load from storage:', e);
        return false;
      }
    }

    // Live update with auto-save
    const saveDebounced = debounce(saveToStorage, 1000);
    [titleEl, introEl, contentEl, listTypeEl].forEach(el => {
      el.addEventListener('input', debounce(() => {
        updatePreview();
        saveDebounced();
      }, 200));
    });
    
    themeSel.addEventListener('change', saveDebounced);

    // Save when steps change
    const originalUpdatePreview = updatePreview;
    updatePreview = function() {
      originalUpdatePreview();
      saveDebounced();
    };

    // Toast helper
    function toast(msg) {
      const t = document.createElement('div');
      t.textContent = msg; t.style.cssText = 'position:fixed;left:50%;top:16px;transform:translateX(-50%);background:#111c;color:#fff;padding:8px 12px;border-radius:8px;z-index:9999;opacity:0;transition:.2s;';
      document.body.appendChild(t); requestAnimationFrame(() => t.style.opacity = '1');
      setTimeout(() => { t.style.opacity = '0'; setTimeout(() => t.remove(), 200); }, 1400);
    }

    // Bootstrap initial UI
    if (!loadFromStorage()) {
      createStep('Откройте терминал на сервере');
      createStep('Установите необходимые зависимости');
    }
    updatePreview();
  </script>
</body>
</html>
